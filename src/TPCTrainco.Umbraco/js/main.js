"use strict";function TPCApp(){var _this=this;this.$win=$(window),this.$aHref=$("a[href*=#]").not(".elec-sort-category"),this.$page=$("html, body"),$(".carousel").carousel(),$(".catalog-top").length&&(this.catalog=new Catalog),this.homePage=new HomePage,$("#main-search").length&&void 0==app.mainSearchSelect&&(app.mainSearchSelect=new MainSearchSelect),$("#date-range-slider").length&&(this.datePicker=new DatePicker),$("#count").length&&(this.countUp=new CountUp),$(".share-btn-wrap").length&&$('[data-toggle="popover"]').popover({animation:!0,trigger:"click",html:!0}),$(".form-standard").length&&(this.formStyles=new FormStyles),$(".register-top").length&&(this.Checkout=new Checkout,$("#reg-submit").on("click",function(e){e.preventDefault();var formData=CreateFormPostString();CheckoutPost(formData)})),($(".register-two").length||$(".summary-top").length)&&(this.CheckoutCustomer=new CheckoutCustomer),Modernizr.touch&&document.body.addEventListener("touchstart",function(){},!1);var isRetina=!1,mediaQuery="(-webkit-min-device-pixel-ratio: 1.5),	        (min--moz-device-pixel-ratio: 1.5),	        (-o-min-device-pixel-ratio: 3/2),	        (min-resolution: 1.5dppx)";window.devicePixelRatio>1&&(isRetina=!0),window.matchMedia&&window.matchMedia(mediaQuery).matches&&(isRetina=!0),this.animateCart(isRetina),this.retinaLogos(isRetina);var hash=window.location.hash;if($(function(){$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var target=$(this.hash);if(target=target.length?target:$("[name="+this.hash.slice(1)+"]"),target.length)return $("html, body").animate({scrollTop:target.offset().top},1e3),!1}})}),(hash||$(".detail-page-app").length)&&"#cf-container"!=hash){void 0==app.mainSearchSelect&&(app.mainSearchSelect=new MainSearchSelect);var searchParams;searchParams=hash?app.mainSearchSelect.getHashSearchParams():app.mainSearchSelect.getSearchParams(),hash?($(".detail-page-app").slideDown(),performSearch(searchParams)):$(".empty-location-msg").hide(),$(".results").children().length||$(".empty-message").show()}$(".success").length&&app.cartNotifyView.clearCart(),$("#search-results").length&&$("body").css("background-color","#F9F9F9 !important"),$(".form-standard").length&&this.addClassToFormBtn(),this.$win.on("resize",function(){_this.handleWindowResize()}),"/search-seminars/"!=window.location.pathname&&"/search-seminars"!=window.location.pathname||this.grayBgBody(),($("body").hasClass("ie8")||$("body").hasClass("ie9"))&&this.iePlaceholders()}function Catalog(){this.$categorySelect=$(".elec-sort-category"),this.$sortItem=$(".electric .seminar-topic"),this.$countryItem=$(".seminar-topic"),this.sortElectricItems(),this.countryToggle()}function CheckoutCustomer(){var _this=this;this.$differentInfo=$("#supervisor-diff"),this.$differentInfoFields=$(".hidden-different-check"),this.$billingOptsSelect=$("#PaymentType"),this.$ccInfo=$(".cc-info"),this.$invoiceInfo=$(".invoice-info"),this.$billingDifferent=$("#BillingDifferent"),this.$promoWrap=$(".promo-wrap"),this.$hearAbout=$("#HearAbout"),this.$promoCode=$("#PromoCode"),this.$hearAboutOther=$("#HearAboutOther"),this.DisableSelectDropdowns(),this.showPromoField(),this.showOtherInfo(),this.billingOptions(),$("#BillFirstName").val()&&(this.$differentInfoFields.slideDown("fast"),this.$billingDifferent.val("true"));var selectedOption=this.$billingOptsSelect.val();"credit"===selectedOption?(this.$ccInfo.show(),this.$invoiceInfo.hide()):"invoice"===selectedOption&&(this.$ccInfo.hide(),this.$invoiceInfo.show()),this.$promoWrap.hide(),this.$promoCode.hide(),this.$hearAboutOther.hide();var selectedOption2=this.$hearAbout.val();"Direct Mail"==selectedOption2||"Print Ad"===selectedOption2||"Email"===selectedOption2?(this.$promoWrap.show(),this.$promoCode.slideDown().addClass("showing")):"Other"!=selectedOption2&&"Referral"!=selectedOption2||(this.$promoWrap.show(),this.$hearAboutOther.slideDown().addClass("showing")),$("#button-submit").on("click",function(){_this.cardProcessingMessage($(this))})}function CountUp(){var _this=this;this.$numbers=$(".number-callout").find("h3"),this.endValuesArr=[],this.getMaxVal(),this.resetVals(),setTimeout(function(){_this.startCounter()},300)}function DatePicker(){var _this=this,minDate=new Date;minDate=new Date(minDate.getFullYear(),minDate.getMonth(),1),this.minMonth=minDate.getMonth();var monthOffset=15,maxDate=new Date(new Date(minDate).setMonth(minDate.getMonth()+monthOffset));maxDate=new Date(maxDate.getFullYear(),maxDate.getMonth(),1),this.maxMonth=maxDate.getMonth();var maxRangeSelect=new Date(new Date(minDate).setMonth(minDate.getMonth()+3)),minRangeSelect=new Date(new Date(minDate)),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];if($(window).width()<=700)var months=["J","F","M","A","M","J","J","A","S","O","N","D"];$("#date-range-slider").dateRangeSlider({bounds:{min:new Date(minDate),max:new Date(maxDate)},defaultValues:{min:new Date(minRangeSelect),max:new Date(maxRangeSelect)},range:{min:{months:2}},valueLabels:"hide",step:{months:1},scales:[{first:function(value){return value},end:function(value){return value},next:function(value){var next=new Date(value);return new Date(next.setMonth(value.getMonth()+1))},label:function(value){var firstMonth=months[value.getMonth()];return"Jan"===firstMonth&&$(window).width()>=701?firstMonth+" "+value.getFullYear():months[value.getMonth()]},format:function(tickContainer,tickStart,tickEnd){tickContainer.addClass("month-label");var tickMonth=tickStart.getMonth(),jan=months[tickMonth];"Jan"===jan&&tickContainer.addClass("first")}}]}),$(window).width()>=700&&this.addYearLabel(),this.valuesChanged(this.minMonth,this.maxMonth),setTimeout(function(){_this.fixWidth(),$(window).width()>=700&&_this.sizeHandle()},10)}function FormStyles(){var _this=this;$(".checktheboxtoreceiveseminarinformationinthemail").find("input[type=checkbox]").on("change",function(){if($(this).is(":checked"))var showHide=!0;else var showHide=!1;_this.showHideForms(showHide)})}function HomePage(){this.$overlay=$(".topic-circles .overlay-contain"),this.showActiveSelection()}function MainSearchSelect(){$("#main-search").select2({tags:!0,selectOnBlur:!0,maximumSelectionLength:1,dropdownAutoWidth:!0,placeholder:function(){$(this).data("placeholder")}}),window.location.hash||this.autofillLocation(),this.styleText(),this.fillEnteredValOnBlur(),$("#main-search").hide()}window.app=window.app||{};var ApiDomain="http://trainco-dev.imulus-client.com";TPCApp.prototype.handleWindowResize=function(){$("#date-range-slider").length&&(this.datePicker=new DatePicker)},TPCApp.prototype.animateCart=function(retinaScreen){var _this=this;this.$carttab=$(".cart-tab"),this.$cartvis=$(".cart-visible"),this.$cartTopImg=$(".cart-top").find("img"),retinaScreen&&this.$carttab.find("img").attr("src","/assets/images/icon-cart-retina.png").css({width:"32px",top:"-15px"}),this.$carttab.on("click",function(){$(".cart").slideToggle(300,function(){$(this).toggleClass("down"),retinaScreen?(_this.$cartvis.toggleClass("down").find("img").attr("src","/assets/images/icon-cart-close-arrow-2x.png"),_this.$cartTopImg.attr("src","/assets/images/icon-cart-retina.png").css({width:"32px"}),$(this).hasClass("down")||_this.$carttab.find("img").attr("src","/assets/images/icon-cart-retina.png")):(_this.$cartvis.toggleClass("down").find("img").attr("src","/assets/images/icon-cart-close-arrow.png"),$(this).hasClass("down")||(_this.$cartTopImg.attr("src","/assets/images/icon-cart-tab.png"),_this.$carttab.find("img").attr("src","/assets/images/icon-cart-tab.png")))})})},TPCApp.prototype.retinaLogos=function(retinaScreen){retinaScreen?$("#logo").attr("src","/assets/images/logo-trainco-2x.png").css("width","220px"):$("#logo").attr("src","/assets/images/logo-trainco-1x.png")},TPCApp.prototype.addClassToFormBtn=function(){$(".form-standard").find(".btn").addClass("btn-reg").addClass("btn-blue-solid")},TPCApp.prototype.grayBgBody=function(){$("body").removeClass("gradient-bg")},TPCApp.prototype.scrollToResults=function(){var _this=this;setTimeout(function(){_this.$page.animate({scrollTop:$("#search-btn").offset().top-80},300)},500)},TPCApp.prototype.iePlaceholders=function(){$.support.placeholder=!1;var test=document.createElement("input");return"placeholder"in test?($.support.placeholder=!0,function(){}):void $('input[type="text"], input[type="email"]').each(function(){var _placeholder=$(this).attr("placeholder");$(this).val(_placeholder)}).focus(function(){var _placeholder=$(this).attr("placeholder");$(this).val()==_placeholder&&$(this).val(" ")}).blur(function(){var _placeholder=$(this).attr("placeholder");" "!=$(this).val()&&$(this).val()||$(this).val(_placeholder)})},Catalog.prototype.sortElectricItems=function(){var _this=this;this.$categorySelect.on("click",function(e){e.preventDefault();var activeCountry=$(".country-toggle a").data("active-country");_this.$categorySelect.parent().removeClass("current");var $target=$(e.target),filterVal=$(this).data("category");_this.$sortItem.each(function(){"all"==filterVal&&$(this).data("country")==activeCountry?($(this).fadeIn("fast").css("display","inline-block"),$target.parent().addClass("current")):$(this).data("type")==filterVal&&$(this).data("country")==activeCountry?($(this).fadeIn("fast").css("display","inline-block"),$target.parent().addClass("current")):$(this).hide()})})},Catalog.prototype.countryToggle=function(){var _this=this;$(".country-toggle a").on("click",function(e){e.preventDefault();var countryToShow=$(this).attr("data-country-sort"),elecItemCategoryActive=$(".current a").data("category");_this.$countryItem.each(function(){var countryOfItem=$(this).data("country");$(this).data("type")==elecItemCategoryActive&&countryOfItem==countryToShow?$(this).fadeIn("fast").css("display","inline-block"):"all"==elecItemCategoryActive&&countryOfItem==countryToShow?$(this).fadeIn("fast").css("display","inline-block"):void 0==$(this).data("type")&&countryOfItem==countryToShow?$(this).fadeIn("fast").css("display","inline-block"):(console.log("fadeout"),$(this).hide())}),"ca"==countryToShow?$(this).fadeOut(50,function(){$(this).fadeIn(50).html('<img src="/assets/images/icon-us-flag.png" class="flag-icon" /> Click to view U.S. seminars'),$(this).attr("data-country-sort","us").data("active-country","ca")}):$(this).fadeOut(50,function(){$(this).fadeIn(50).html('<img src="/assets/images/icon-canada-flag.png" class="flag-icon" /> Click to view Canadian seminars'),$(this).attr("data-country-sort","ca").data("active-country","us")})})},CheckoutCustomer.prototype.DisableSelectDropdowns=function(){$("select option:first-child").attr("disabled","disabled")},CheckoutCustomer.prototype.showOtherInfo=function(){var _this=this;_this.$differentInfo.on("change",function(){$(this).is(":checked")?(_this.$differentInfoFields.slideDown("fast"),_this.$billingDifferent.val("true")):(_this.$differentInfoFields.slideUp("fast"),_this.$billingDifferent.val("false"))})},CheckoutCustomer.prototype.showPromoField=function(){var _this=this;_this.$hearAbout.on("change",function(){var selectedOption=_this.$hearAbout.val();_this.$promoWrap.hide(),_this.$promoCode.hide(),_this.$hearAboutOther.hide(),"Direct Mail"===selectedOption||"Print Ad"===selectedOption||"Email"===selectedOption||"Web search"===selectedOption?("Print Ad"==selectedOption?_this.$promoCode.attr("placeholder","Promo Code"):"Web search"==selectedOption?_this.$promoCode.attr("placeholder","Search Term"):_this.$promoCode.attr("placeholder","Promo Code or description of mailer"),_this.$promoWrap.show(),_this.$promoCode.slideDown().addClass("showing")):"Other"!=selectedOption&&"Referral"!=selectedOption||(_this.$promoWrap.show(),_this.$hearAboutOther.slideDown().addClass("showing"))})},CheckoutCustomer.prototype.billingOptions=function(){var _this=this;_this.$billingOptsSelect.on("change",function(){var selectedOption=$("#PaymentType").val();"credit"===selectedOption?(_this.$invoiceInfo.hide(),_this.$ccInfo.slideDown("fast")):"invoice"===selectedOption?(_this.$ccInfo.hide(),_this.$invoiceInfo.slideDown("fast")):(_this.$ccInfo.slideUp("fast"),_this.$invoiceInfo.slideUp("fast"))}),$(".cvv-text").on("click",function(){$(this).find("span").toggleClass("showing")})},CheckoutCustomer.prototype.cardProcessingMessage=function(submitBtn){submitBtn.fadeOut(300,function(){$(".card-loader").fadeIn(),$(".processing-msg").fadeIn().text("Order processing may take several seconds. Please wait...")}),setTimeout(function(){$(".card-loader").fadeOut(100,function(){$(".processing-msg").text("There was an error processing your order. Please try again."),submitBtn.fadeIn()})},15e3)},CountUp.prototype.getMaxVal=function(){var _this=this;$(".number-callout").find("h3").each(function(index){var number=parseInt($(this).data("value").toString().replace(/\D/g,""));_this.endValuesArr.push(number)})},CountUp.prototype.resetVals=function(){this.$numbers[0].innerHTML="-",this.$numbers[1].innerHTML="-",this.$numbers[2].innerHTML="-"},CountUp.prototype.startCounter=function(){function increase(){var max=_this.endValuesArr[indx];startNum++,0===indx?_this.$numbers[indx].innerHTML=startNum+"K+":2===indx?_this.$numbers[indx].innerHTML=startNum+"+":_this.$numbers[indx].innerHTML=startNum+"K+",startNum===max&&(indx++,numOfCalls++,startNum=0,clearInterval(inter),maxInt>=indx&&(inter=setInterval(increase,6))),3==numOfCalls&&window.clearInterval(inter)}var inter,_this=this,maxInt=this.endValuesArr.length,indx=0,startNum=0,numOfCalls=0;inter=setInterval(increase,8)},DatePicker.prototype.addYearLabel=function(){$(".first").css({"line-height":1.27,marginTop:"-7px",position:"relative",top:"8px",height:"42px"}).find(".ui-ruler-tick-label").css({display:"inline-block",width:"84%"})},DatePicker.prototype.sizeHandle=function(){var monthWidth=$($(".ui-ruler-tick-inner")[0]).outerWidth();$(".ui-rangeSlider-handle").css("width",monthWidth+"px")},DatePicker.prototype.valuesChanged=function(startMonth,endMonth){var rHandle=$(".ui-rangeSlider-rightHandle"),lHandle=$(".ui-rangeSlider-leftHandle"),months=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEPT","OCT","NOV","DEC"];rHandle.text(months[this.maxMonth-1]),lHandle.text(months[this.minMonth]),$("#date-range-slider").trigger,$("#date-range-slider").on("valuesChanging",function(e,data){var minMonth=new Date(data.values.min),maxMonth=new Date(data.values.max);maxMonth.setDate(maxMonth.getDate()-1),minMonth.setDate(minMonth.getDate());var maxMonthAbbr=months[maxMonth.getMonth()],minMonthAbbr=months[minMonth.getMonth()];rHandle.text(maxMonthAbbr),lHandle.text(minMonthAbbr)}),$("#date-range-slider").on("valuesChanged",function(e,data){var minMonth=new Date(data.values.min),maxMonth=new Date(data.values.max);maxMonth.setDate(maxMonth.getDate()-1),minMonth.setDate(minMonth.getDate());var maxMonthAbbr=months[maxMonth.getMonth()],minMonthAbbr=months[minMonth.getMonth()];rHandle.text(maxMonthAbbr),lHandle.text(minMonthAbbr)})},DatePicker.prototype.fixWidth=function(){var containerWidth=$(".ui-rangeSlider-container").width();$(".ui-rangeSlider-innerBar").css("width",containerWidth+"px")},FormStyles.prototype.showHideForms=function(showHide){$(".mailingaddress, .mailingaddressline2, .city, .stateprovince, .postalcode, .country").find("input[type=text], label, select").toggle(showHide)},HomePage.prototype.showActiveSelection=function(){Modernizr.touch?this.$overlay.on("touchstart",function(){var $this=$(this);$this.hasClass("chosen")?$this.removeClass("chosen").addClass("touch"):$this.addClass("chosen").removeClass("touch")}):this.$overlay.on("click",function(){var $this=$(this);$this.hasClass("chosen")?$this.removeClass("chosen"):$this.addClass("chosen")})},window.app=window.app||{},MainSearchSelect.prototype.getSearchParams=function(){var topicsArray=[],classId=0,searchLocationVal=$("#main-search").select2("val");if($('.secondary-search[data-classid!=""][data-classid]')&&(classId=$(".secondary-search").data("classid")),null==searchLocationVal)return $(".empty-location-msg").fadeIn(150).delay(200).fadeTo(150,.5).delay(150).fadeTo(150,1).delay(200).fadeTo(150,.5).delay(150).fadeTo(150,1).delay(200).fadeTo(150,.5).delay(150).fadeTo(150,1),void $(".class-loader").fadeOut(150);var location=$("#main-search").select2("val").toString();$(".empty-location-msg").fadeOut(150),$(".chosen").each(function(){var selectedTopic=$(this).data("topic");"all"===selectedTopic?topicsArray.push("electrical","management","hvac","mechanical"):topicsArray.push(selectedTopic)}),0==topicsArray.length&&topicsArray.push("electrical","management","hvac","mechanical");var dateValues=$("#date-range-slider").dateRangeSlider("values"),minDate=new Date(dateValues.min),minMonth=minDate.getMonth()+1,minYear=minDate.getFullYear(),maxDate=new Date(dateValues.max),maxMonth=maxDate.getMonth()+1,maxYear=maxDate.getFullYear();return this.updateHashBang(location,topicsArray,minMonth+"/"+minYear,maxMonth+"/"+maxYear),app.resStringified=this.generateJsonSearchString(location,topicsArray,classId,minMonth,minYear,maxMonth,maxYear),app.resStringified},MainSearchSelect.prototype.getHashSearchParams=function(){var hashArray=this.processHashBang();if(hashArray.hasOwnProperty("loc")||hashArray.hasOwnProperty("topics")){$(".detail-page-app").show();var topicsArray=[],classId=0,location="";topicsArray=hashArray.topics.split(","),location=unescape(hashArray.loc),this.autofillLocation(location);var minDate=hashArray.dMin.split("/"),minMonth=minDate[0],minYear=minDate[1],maxDate=hashArray.dMax.split("/"),maxMonth=maxDate[0],maxYear=maxDate[1],minDateObj=new Date(parseInt(minYear),parseInt(minMonth)-1),maxDateObj=new Date(parseInt(maxYear),parseInt(maxMonth)-1);if($(document).ready(function(){$("#date-range-slider").dateRangeSlider("values",minDateObj,maxDateObj)}),void 0!=topicsArray&&4==topicsArray.length)$('.overlay-contain[data-topic="all"]').addClass("chosen");else for(var i in topicsArray)$('.overlay-contain[data-topic="'+topicsArray[i]+'"]').addClass("chosen");return $('.secondary-search[data-classid!=""][data-classid]')&&(classId=parseInt($(".secondary-search").data("classid"))),app.resStringified=this.generateJsonSearchString(location,topicsArray,classId,minMonth,minYear,maxMonth,maxYear),app.resStringified}return $(".detail-page-app").hide(),!1},MainSearchSelect.prototype.generateJsonSearchString=function(location,topicsArray,classId,minMonth,minYear,maxMonth,maxYear){var returnJson,searchResults,minMonthYear={minMonthVal:minMonth,minYearVal:minYear},maxMonthYear={maxMonthVal:maxMonth,maxYearVal:maxYear},selectedDates={min:minMonthYear,max:maxMonthYear};return searchResults=classId>0?{location:location,classId:classId,dates:selectedDates}:{location:location,classTopics:topicsArray,dates:selectedDates},returnJson=JSON.stringify(searchResults)},MainSearchSelect.prototype.autofillLocation=function(urlLocation){if(urlLocation)$("#main-search").prepend('<option value="'+urlLocation+'" selected>'+urlLocation+"</option>").trigger("change");else{var visitorLocation=$("#main-search").data("location");if("undefined"==visitorLocation||""==visitorLocation)return!1;$("#main-search").prepend('<option value="'+visitorLocation+'" selected>'+visitorLocation+"</option>").trigger("change")}},MainSearchSelect.prototype.processHashBang=function(){for(var url=window.location.href,vars={},hashes=url.slice(url.indexOf("#")+1).split("&"),i=0;i<hashes.length;i++){var hash=hashes[i].split("=");hash.length>1?vars[hash[0]]=hash[1]:vars[hash[0]]=null}return vars},MainSearchSelect.prototype.updateHashBang=function(location,topics,dateMin,dateMax){var hashStr="loc="+(escape(location)||"")+"&topics="+(topics.toString()||"")+"&dMin="+(dateMin||"")+"&dMax="+(dateMax||"");window.location.hash=hashStr},MainSearchSelect.prototype.detailPageSearch=function(){var classLocation=$("#main-search").data("location"),classIdSearched=$(".secondary-search").data("classid");return{location:classLocation,classId:classIdSearched}},MainSearchSelect.prototype.styleText=function(){$("#main-search").on("select2:open",function(e){setTimeout(function(){$($(".select2-results__group")[0]).css({borderTop:"1px dashed #3E3E3E",padding:"10px"})},1)})},MainSearchSelect.prototype.fillEnteredValOnBlur=function(){var fieldVal="",$mainSearch=$("#main-search");$(document).on("keyup",".select2-search__field",function(){fieldVal=$(this).val()}),$mainSearch.on("select2:close",function(e){var text=fieldVal;!$(this).val()&&fieldVal.length&&($mainSearch.prepend('<option data-temp-item="true" value="'+fieldVal+'" selected>'+fieldVal+"</option>").trigger("change"),fieldVal="",$('[data-temp-item="true"]').remove(),$mainSearch.val(text).trigger("change"))})};